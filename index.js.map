{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"53511640-00e42e73f696871d7dee14b6b\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n    return data;\n  } catch (error) {\n    console.error(\"Помилка при отриманні зображень:\", error.message);\n    throw error;\n  }\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadingText = document.querySelector(\".loading-text\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\nexport function createGallery(images) {\n  const markup = images.map(createGalleryItem).join(\"\");\n  galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = \"\";\n}\n\n\nexport function showLoader() {\n  toggleLoader(true);\n}\n\n\nexport function hideLoader() {\n  toggleLoader(false);\n}\n\n\nfunction createGalleryItem({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n    <li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </li>\n  `;\n}\n\n\nfunction toggleLoader(isVisible) {\n  loader.classList.toggle(\"visible\", isVisible);\n  loadingText.classList.toggle(\"visible\", isVisible);\n}\n\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"#search-form\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\nconst perPage = 15;\n\nform.addEventListener(\"submit\", onSearch);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  const query = event.target.elements[\"search-text\"].value.trim();\n\n  if (!query) {\n    return showToast(\"warning\", \"Увага\", \"Поле пошуку не може бути порожнім!\", \"#ffc107\");\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n\n  clearGallery();\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const { hits, totalHits: total } = await getImagesByQuery(currentQuery, currentPage, perPage);\n    totalHits = total;\n\n    if (!hits.length) {\n      return showToast(\n        \"info\",\n        \"Немає результатів\",\n        \"Sorry, there are no images matching your search query. Please try again!\",\n        \"#ff4d4d\",\n        \"#fff\"\n      );\n    }\n\n    createGallery(hits);\n\n    if (hits.length < perPage || currentPage * perPage >= totalHits) {\n      hideLoadMore();\n      showToast(\"info\", \"Кінець колекції\", \"We're sorry, but you've reached the end of search results.\", \"#17a2b8\", \"#fff\");\n    } else {\n      showLoadMore();\n    }\n  } catch (error) {\n    showToast(\"error\", \"Помилка\", \"Не вдалося завантажити зображення.\", \"#ff4d4d\", \"#fff\");\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const { hits } = await getImagesByQuery(currentQuery, currentPage, perPage);\n\n    if (!hits.length) {\n      hideLoadMore();\n      return showToast(\"info\", \"Кінець колекції\", \"We're sorry, but you've reached the end of search results.\", \"#17a2b8\", \"#fff\");\n    }\n\n    createGallery(hits);\n    smoothScroll(); \n\n    if (currentPage * perPage >= totalHits) {\n      hideLoadMore();\n      showToast(\"info\", \"Кінець колекції\", \"We're sorry, but you've reached the end of search results.\", \"#17a2b8\", \"#fff\");\n    }\n  } catch (error) {\n    showToast(\"error\", \"Помилка\", \"Не вдалося завантажити додаткові зображення.\", \"#ff4d4d\", \"#fff\");\n  } finally {\n    hideLoader();\n  }\n}\n\n\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector(\".gallery-item\");\n  if (!firstCard) return;\n\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}\n\n\n\nfunction showToast(type, title, message, backgroundColor, textColor = \"#000\") {\n  iziToast[type]({\n    title,\n    message,\n    position: \"topRight\",\n    backgroundColor,\n    titleColor: textColor,\n    messageColor: textColor,\n    maxWidth: 400,\n    timeout: 3000,\n  });\n}\n\n\nfunction showLoadMore() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\n\nfunction hideLoadMore() {\n  loadMoreBtn.classList.add(\"hidden\");\n}\n\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","data","axios","error","galleryContainer","loader","loadingText","lightbox","SimpleLightbox","createGallery","images","markup","createGalleryItem","clearGallery","showLoader","toggleLoader","hideLoader","webformatURL","largeImageURL","tags","likes","views","comments","downloads","isVisible","form","loadMoreBtn","currentQuery","currentPage","totalHits","onSearch","onLoadMore","event","showToast","hideLoadMore","hits","total","showLoadMore","smoothScroll","firstCard","cardHeight","type","title","message","backgroundColor","textColor","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACpE,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIN,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,EACD,OAAOC,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,mCAAoCA,EAAM,OAAO,EACzDA,CACP,CACH,CCpBA,MAAMC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,eAAe,EAEpDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAGM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EAAO,IAAIE,CAAiB,EAAE,KAAK,EAAE,EACpDR,EAAiB,mBAAmB,YAAaO,CAAM,EACvDJ,EAAS,QAAO,CAClB,CAGO,SAASM,GAAe,CAC7BT,EAAiB,UAAY,EAC/B,CAGO,SAASU,GAAa,CAC3BC,EAAa,EAAI,CACnB,CAGO,SAASC,GAAa,CAC3BD,EAAa,EAAK,CACpB,CAGA,SAASH,EAAkB,CAAE,aAAAK,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CACnG,MAAO;AAAA;AAAA,iBAEQL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,2BAGnBC,CAAK;AAAA,2BACLC,CAAK;AAAA,8BACFC,CAAQ;AAAA,+BACPC,CAAS;AAAA;AAAA;AAAA,GAIxC,CAGA,SAASR,EAAaS,EAAW,CAC/BnB,EAAO,UAAU,OAAO,UAAWmB,CAAS,EAC5ClB,EAAY,UAAU,OAAO,UAAWkB,CAAS,CACnD,CClDA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EAChB,MAAM7B,EAAU,GAEhByB,EAAK,iBAAiB,SAAUK,CAAQ,EACxCJ,EAAY,iBAAiB,QAASK,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpB,MAAMlC,EAAQkC,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAEzD,GAAI,CAAClC,EACH,OAAOmC,EAAU,UAAW,QAAS,qCAAsC,SAAS,EAGtFN,EAAe7B,EACf8B,EAAc,EAEdf,IACAqB,IACApB,IAEA,GAAI,CACF,KAAM,CAAE,KAAAqB,EAAM,UAAWC,CAAO,EAAG,MAAMvC,EAAiB8B,EAAcC,EAAa5B,CAAO,EAG5F,GAFA6B,EAAYO,EAER,CAACD,EAAK,OACR,OAAOF,EACL,OACA,oBACA,2EACA,UACA,MACR,EAGIxB,EAAc0B,CAAI,EAEdA,EAAK,OAASnC,GAAW4B,EAAc5B,GAAW6B,GACpDK,IACAD,EAAU,OAAQ,kBAAmB,6DAA8D,UAAW,MAAM,GAEpHI,GAEH,MAAe,CACdJ,EAAU,QAAS,UAAW,qCAAsC,UAAW,MAAM,CACzF,QAAY,CACRjB,GACD,CACH,CAEA,eAAee,GAAa,CAC1BH,GAAe,EACfd,IAEA,GAAI,CACF,KAAM,CAAE,KAAAqB,CAAI,EAAK,MAAMtC,EAAiB8B,EAAcC,EAAa5B,CAAO,EAE1E,GAAI,CAACmC,EAAK,OACR,OAAAD,IACOD,EAAU,OAAQ,kBAAmB,6DAA8D,UAAW,MAAM,EAG7HxB,EAAc0B,CAAI,EAClBG,IAEIV,EAAc5B,GAAW6B,IAC3BK,IACAD,EAAU,OAAQ,kBAAmB,6DAA8D,UAAW,MAAM,EAEvH,MAAe,CACdA,EAAU,QAAS,UAAW,+CAAgD,UAAW,MAAM,CACnG,QAAY,CACRjB,GACD,CACH,CAIA,SAASsB,GAAe,CACtB,MAAMC,EAAY,SAAS,cAAc,eAAe,EACxD,GAAI,CAACA,EAAW,OAEhB,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAIA,SAASP,EAAUQ,EAAMC,EAAOC,EAASC,EAAiBC,EAAY,OAAQ,CAC5EC,EAASL,CAAI,EAAE,CACb,MAAAC,EACA,QAAAC,EACA,SAAU,WACV,gBAAAC,EACA,WAAYC,EACZ,aAAcA,EACd,SAAU,IACV,QAAS,GACb,CAAG,CACH,CAGA,SAASR,GAAe,CACtBX,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASQ,GAAe,CACtBR,EAAY,UAAU,IAAI,QAAQ,CACpC"}